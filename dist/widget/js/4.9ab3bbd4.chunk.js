(this.webpackJsonp=this.webpackJsonp||[]).push([[4],{394:function(e,t,s){"use strict";s.r(t);var a=s(27),n=s.n(a);const i="cancelled",o="declined",d="draft",r="sent",l="completed";function c(e,t,s,a,n,i,o){try{var d=e[i](o),r=d.value}catch(e){return void s(e)}d.done?t(r):Promise.resolve(r).then(a,n)}function p(e,t,s,a,n,i,o,d){var r,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=s,l._compiled=!0),a&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),o?(r=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=r):n&&(r=d?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),r)if(l.functional){l._injectStyles=r;var c=l.render;l.render=function(e,t){return r.call(t),c(e,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,r):[r]}return{exports:e,options:l}}var b=p({props:{recipient:Object,envelopeId:String,visible:Boolean,id:String,sessionId:String,recipientResend:Function},methods:{resendEnvelope(){var e,t=this;return(e=function*(){try{200===(yield t.recipientResend(t.recipient.id,t.envelopeId,t.sessionId)).status&&(t.$emit("close"),t.$store.dispatch("notifications/addNotification",{type:"success",message:"Email úspěšně odeslán."}))}catch(e){400===e.response.status&&console.log(e.response.data),console.log(e)}},function(){var t=this,s=arguments;return new Promise((function(a,n){var i=e.apply(t,s);function o(e){c(i,a,n,o,d,"next",e)}function d(e){c(i,a,n,o,d,"throw",e)}o(void 0)}))})()}}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ds-modal",{staticClass:"dsw",attrs:{visible:e.visible,"aria-labelledby":e.id,"wrapper-tag":"div"},on:{close:function(t){return e.$emit("close")}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.close;return[s("div",{staticClass:"bg-gray-100 shadow-lg max-w-xl mx-auto"},[s("div",{staticClass:"mx-4"},[s("div",{staticClass:"flex mb-6"},[s("div",{staticClass:"flex-grow mt-6 text-xl text-gray-1000",attrs:{tabindex:"0",id:e.id}},[e._v("Znovu odelat příjemci?")]),s("button",{staticClass:"px-3 -mr-3 text-xl leading-none text-gray-800",attrs:{"aria-label":"Zavřít"},on:{click:function(e){return e.preventDefault(),a(e)}}},[e._v("\n                        ×\n                    ")])]),s("div",{staticClass:"mb-10 text-sm"},[e._v("\n                    Opravdu si přejete znovu odeslat na email "),s("a",{attrs:{href:"mailto:"+e.recipient.email}},[e._v(e._s(e.recipient.email))]),e._v(" ?\n                ")])]),s("div",{staticClass:"flex px-px mb-px"},[s("button",{staticClass:"flex-grow p-4 mx-px mb-px text-sm text-left text-white bg-gray-800",on:{click:function(e){return e.preventDefault(),a(e)}}},[e._v("\n                    Zavřít\n                ")]),s("button",{staticClass:"flex-grow p-4 mx-px mb-px text-sm text-left text-white bg-blue-600",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.resendEnvelope(t)}}},[e._v("\n                    Odeslat\n                ")])])])]}}])})}),[],!1,null,null,null).exports,f=p({props:{errorMessage:{type:String,default:"Vyskytla se chyba, zkuste akci opakovat později."},getUrlDocumentFile:Function,recipientResend:Function,sessionId:String},components:{RecipientResendDropdown:b},data:()=>({hasError:!1,recipientsModal:[],envelope:{status:"draft",metadata:"",documents:[{name:"Vue-3-Cheat-Sheet.pdf",metadata:"",file:{id:"d504ab50-f851-4411-9e37-f5aab3950c09",createdAt:"2020-10-02T13:49:27+02:00",updatedAt:"2020-10-02T13:49:27+02:00",name:"file-5f7713c7d3dc4461160545.",originalName:"file",mimeType:"application/pdf",size:225607,sha1Checksum:"6e33cfd8a85e68397741523ab137fa8a7edf669a",_actions:[],_links:{content:"/api/files/d504ab50-f851-4411-9e37-f5aab3950c09/content"}},position:0,id:"6074f60f-6eb5-4b08-9002-dea84df4a864",createdAt:"2020-10-02T13:49:28+02:00",updatedAt:"2020-10-02T13:49:28+02:00",_actions:{update:{method:"PUT",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/documents/6074f60f-6eb5-4b08-9002-dea84df4a864"},delete:{method:"DELETE",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/documents/6074f60f-6eb5-4b08-9002-dea84df4a864"}},_links:{download:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/documents/6074f60f-6eb5-4b08-9002-dea84df4a864/download",tags:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/documents/6074f60f-6eb5-4b08-9002-dea84df4a864/tags",self:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/documents/6074f60f-6eb5-4b08-9002-dea84df4a864"}}],recipients:[{status:"draft",metadata:"",role:"signer",name:"Dušek",email:"etetete@tetest.com",mobile:"+420731123456",emailBody:null,sentAt:null,deliveredAt:null,nonDeliveredAt:null,signedAt:null,declinedAt:null,cancelledAt:null,id:"172157ae-9fe8-4cb6-ad17-23de6e37068b",createdAt:"2020-10-02T13:49:22+02:00",updatedAt:"2020-10-02T13:49:22+02:00",_actions:{update:{method:"PUT",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/recipients/172157ae-9fe8-4cb6-ad17-23de6e37068b"},delete:{method:"DELETE",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/recipients/172157ae-9fe8-4cb6-ad17-23de6e37068b"},resend:{violations:[{title:'EnvelopeRecipient status must be one of "sent", "delivered", "nonDelivered", "signed"',parameters:{"{{ statuses }}":'"sent", "delivered", "nonDelivered", "signed"'},type:"urn:uuid:ee099d8f-77de-428c-986c-2b6cb025f4ad"},{title:'Envelope status must be one of "sent", "completed"',parameters:{"{{ statuses }}":'"sent", "completed"'},type:"urn:uuid:d6bcd7cf-b8f0-4b5c-9422-1a108ba23635"}],method:"POST",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/recipients/172157ae-9fe8-4cb6-ad17-23de6e37068b/resend"}},_links:{self:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/recipients/172157ae-9fe8-4cb6-ad17-23de6e37068b"}}],emailSubject:"Teeesst další",emailBody:"Teeesst další",senderName:"John Smith",senderEmail:"john.smith@example.com",validTo:null,sentAt:null,completedAt:null,cancelledAt:null,expiredAt:null,declinedAt:null,id:"b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5",createdAt:"2020-10-02T13:49:05+02:00",updatedAt:"2020-10-02T13:49:39+02:00",_actions:{update:{method:"PUT",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5"},extend:{method:"PUT",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/extend"},send:{method:"POST",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/send"},cancel:{method:"POST",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/cancel"},delete:{method:"DELETE",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5"},add_recipient:{method:"POST",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/recipients"},add_document:{method:"POST",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/documents"},add_tag:{method:"POST",uri:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/tags"}},_links:{download:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/download",recipients:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/recipients",documents:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/documents",tags:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5/tags",self:"/api/envelopes/b7eb3ef9-36d7-4890-9d3f-77cc37ff9ba5"}}}),methods:{getEnvelopeStatusClasses:function(e){return{[i]:"bg-gray-300",[o]:"bg-gray-300",[d]:"bg-purple-400",[r]:"bg-cyan-400",[l]:"bg-green-500"}[e]||""},isLast:(e,t)=>e.length-1===t,showRecipientModal(e){this.recipientsModal.splice(e,1,!0)},hasRecipientResend:e=>!e._actions.resend.violations,closeRecipientModal(e){this.recipientsModal.splice(e,1,!1)}}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ds-provide-icon-setting",{attrs:{package:"digisignapp"}},[s("section",{staticClass:"w-full px-4 py-4 bg-white md:px-8 md:py-6"},[s("div",{staticClass:"mb-4 text-xl font-medium md:mb-8 text-gray-1000"},[e._v(e._s(e.envelope.emailSubject))]),s("table",{staticClass:"w-full mb-4 border-collapse table-fixed md:mb-8"},[s("thead",[s("tr",[s("th",{staticClass:"w-32 pr-2 text-xs font-normal text-left text-gray-700"},[e._v("Vytvořeno")]),s("th",{staticClass:"px-4 text-xs font-normal text-left text-gray-700"},[e._v("Stav")])])]),s("tbody",[s("tr",[s("td",{staticClass:"pt-1 pb-2 pr-2 text-sm border-b border-gray-200 text-gray-1000"},[s("span",{attrs:{title:e.$formatDateString(e.envelope.createdAt,"L")+" "+e.$formatDateString(e.envelope.createdAt,"LT")}},[e._v("\n                        "+e._s(e.$formatDateString(e.envelope.createdAt,"L"))+"\n                    ")])]),s("td",{staticClass:"px-4 pt-1 pb-2 text-sm border-b border-gray-200 text-gray-1000"},[s("div",{staticClass:"flex items-center"},[s("div",{staticClass:"flex-none w-2 h-2 mr-2 rounded-full",class:e.getEnvelopeStatusClasses(e.envelope.status)}),s("span",[e._v(e._s(e.$t("envelope."+e.envelope.status)))])])])])])]),s("div",{staticClass:"mb-2 text-base font-semibold md:mb-4 text-gray-1000"},[e._v("Dokumenty k podpisu")]),s("div",{staticClass:"-mx-4 md:mx-0"},[s("table",{staticClass:"w-full mb-4 bg-gray-100 border-collapse md:mb-8"},[s("tbody",e._l(e.envelope.documents,(function(t,a){return s("tr",{key:t.id},[s("td",{staticClass:"px-4 py-2 border-b border-gray-200 text-gray-1000",class:{"border-b":e.isLast(e.envelope.documents,a)}},[s("div",{staticClass:"flex"},[s("ds-icon",{staticClass:"flex-none w-5 h-5 mt-1 mr-3 bg-blue-600",attrs:{name:"i_mimetype_pdf_32"}}),s("span",{staticClass:"self-center text-sm"},[e._v(e._s(t.name))])],1)]),s("td",{staticClass:"px-2 py-2 text-right border-b border-gray-200",class:{"border-b":e.isLast(e.envelope.documents,a)}},[s("ds-dropdown",{staticClass:"inline-flex items-center justify-center w-8 h-8",attrs:{"tag-name":"button",type:"button","prevent-overflow":"",position:"bottom-start","popper-modifiers":[{name:"offset",options:{offset:[0,8]}}],"class-content":"shadow-dmd max-w-lg bg-gray-100 cursor-auto","is-opened-class-trigger":"bg-gray-100"}},[s("ds-icon",{staticClass:"w-4 h-4 bg-gray-1000",attrs:{name:"i_more_vertical_20"}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("ul",{staticClass:"w-auto"},[s("li",{staticClass:"w-auto text-base text-gray-800 cursor-pointer"},[s("a",{staticClass:"block px-4 py-3",attrs:{href:e.getUrlDocumentFile(t.id,e.envelope.id,e.sessionId),download:""}},[e._v("Stáhnout")])])])])],1)],1)])})),0)])]),s("div",{staticClass:"mb-2 text-base font-semibold md:mb-4 text-gray-1000"},[e._v("Příjemci")]),s("div",{staticClass:"-mx-4 md:mx-0"},[s("table",{staticClass:"block w-full mb-4 bg-gray-100 border-collapse md:mb-8 md:table"},[s("thead",{staticClass:"hidden md:table-header-group"},[s("tr",{staticClass:"bg-gray-200"},[s("th",{staticClass:"px-4 py-2 text-sm font-medium text-left text-gray-1000"},[e._v("Jméno")]),s("th",{staticClass:"px-4 py-2 text-sm font-medium text-left text-gray-1000"},[e._v("E-mail")]),s("th",{staticClass:"px-4 py-2 text-sm font-medium text-left text-gray-1000"},[e._v("Telefon")]),s("th",{staticClass:"px-4 py-2 text-sm font-medium text-left text-gray-1000"},[e._v("Úloha")]),s("th",{staticClass:"px-4 py-2 text-sm font-medium text-left text-gray-1000"},[e._v("Stav")]),s("th",{staticClass:"px-4 py-2 text-sm font-medium text-left text-gray-1000"})])]),s("tbody",{staticClass:"block text-sm md:table-row-group"},e._l(e.envelope.recipients,(function(t,a){return s("tr",{key:t.id,staticClass:"relative flex flex-col pt-4 pb-2 border-b border-gray-200 md:pb-0 md:pt-0 md:border-b md:table-row text-gray-1000"},[s("td",{staticClass:"order-1 px-4 pb-3 mr-10 text-base font-bold border-gray-200 md:text-sm md:py-2 md:font-normal md:border-t md:border-b"},[e._v("\n                        "+e._s(t.name)+"\n                    ")]),s("td",{staticClass:"order-3 px-4 pb-2 mr-10 border-gray-200 md:py-2 md:border-t md:border-b"},[e._v("\n                        "+e._s(t.email)+"\n                    ")]),s("td",{staticClass:"order-4 px-4 pb-2 mr-10 border-gray-200 md:py-2 md:border-t md:border-b"},[e._v("\n                        "+e._s(t.mobile)+"\n                    ")]),s("td",{staticClass:"order-2 px-4 pb-2 mr-10 border-gray-200 md:py-2 md:border-t md:border-b",attrs:{title:"signer"===t.role?"Podepisující":"Obdrží kopii"}},[s("ds-icon",{staticClass:"w-4 h-4 bg-gray-1000",attrs:{name:"signer"===t.role?"i_signature":"i_preview"}}),s("span",{staticClass:"ml-2 md:hidden"},[e._v(e._s("signer"===t.role?"Podepisující":"Obdrží kopii"))])],1),s("td",{staticClass:"order-5 px-4 pb-2 mr-10 border-gray-200 md:py-2 md:border-t md:border-b"},[s("div",{staticClass:"flex items-center"},[s("div",{staticClass:"w-2 h-2 mr-2 rounded-full",class:e.getEnvelopeStatusClasses(t.status)}),s("span",[e._v(e._s(e.$t("recipient."+t.status)))])])]),s("td",{staticClass:"absolute top-0 right-0 px-2 pb-2 mt-2 text-right border-gray-200 md:py-2 md:mt-0 md:mr-0 md:border-t md:border-b md:static"},[e.hasRecipientResend(t)?[s("ds-dropdown",{staticClass:"inline-flex items-center justify-center w-8 h-8",attrs:{"tag-name":"button",type:"button","prevent-overflow":"",position:"bottom-start","popper-modifiers":[{name:"offset",options:{offset:[0,8]}}],"class-content":"shadow-dmd max-w-lg bg-gray-100 cursor-auto","is-opened-class-trigger":"bg-gray-100"}},[s("ds-icon",{staticClass:"w-4 h-4 bg-gray-1000",attrs:{name:"i_more_vertical_20"}}),s("div",{attrs:{slot:"content"},slot:"content"},[s("ul",{staticClass:"w-auto"},[s("li",{staticClass:"w-auto px-4 py-3 text-base text-gray-800 cursor-pointer",on:{click:function(t){return t.preventDefault(),e.showRecipientModal(a)}}},[e._v("\n                                            Odeslat znovu\n                                        ")])])])],1),s("recipient-resend-dropdown",{attrs:{id:"dialogHeader"+a,recipient:t,"session-id":e.sessionId,"envelope-id":e.envelope.id,"recipient-resend":e.recipientResend,visible:e.recipientsModal[a]||!1},on:{close:function(t){return e.closeRecipientModal(a)}}})]:e._e()],2)])})),0)])]),s("div",{staticClass:"mb-2 text-base font-semibold md:mb-4 text-gray-1000"},[e._v("Obálka")]),s("div",{staticClass:"mb-2 text-sm md:mb-4 text-gray-1000"},[e._v("Název")]),s("div",{staticClass:"px-4 py-2 mb-4 text-sm bg-gray-100 md:mb-8 text-gray-1000"},[e._v(e._s(e.envelope.emailSubject))]),s("div",{staticClass:"mb-2 text-sm md:mb-4 text-gray-1000"},[e._v("Připojená zpráva")]),s("div",{staticClass:"px-4 py-2 text-sm bg-gray-100 text-gray-1000",domProps:{innerHTML:e._s(e.envelope.emailBody)}})])])}),[],!1,null,null,null).exports;function m(e,t,s,a,n,i,o){try{var d=e[i](o),r=d.value}catch(e){return void s(e)}d.done?t(r):Promise.resolve(r).then(a,n)}function u(e){return function(){var t=this,s=arguments;return new Promise((function(a,n){var i=e.apply(t,s);function o(e){m(i,a,n,o,d,"next",e)}function d(e){m(i,a,n,o,d,"throw",e)}o(void 0)}))}}var v=p({props:{token:{type:String},errorMessage:{type:String,default:"Vyskytla se chyba, zkuste akci opakovat později."}},components:{EnvelopeDetail:f},data:()=>({envelope:{},hasError:!1,apiBaseUrl:"https://app.digisign.digital.cz/embedded",sessionId:null,loading:!1}),methods:{getEnvelope(){var e=this;return u((function*(){try{const t=yield n.a.get(e.$route("embedded.envelope.get",null,!0),{headers:{Authorization:"Bearer "+e.sessionId}});if(200===t.status)return t.data}catch(e){console.log(e)}return null}))()},getAuthToken(e){var t=this;return u((function*(){const s=yield n.a.post(t.$route("ui_embedded_loginaction__invoke",null,!0),{token:e});return 200===s.status?s.data.sess:0}))()},getUrlDocumentFile(e,t,s){return`${this.$route("embedded.envelope.documents.download",{document:e},!0)}?sess=${s}`},recipientResend(e,t,s){return n.a.post(this.$route("embedded.envelope.recipients.resend",{recipient:e},!0),null,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}})}}},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dsw"},[t("envelope-detail",{attrs:{envelope:this.envelope,"get-url-document-file":this.getUrlDocumentFile,"recipient-resend":this.recipientResend,"session-id":this.sessionId}})],1)}),[],!1,null,null,null);t.default=v.exports}}]);